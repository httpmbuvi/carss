<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory | HEM MOTORS</title>
    <link href="https://fonts.googleapis.com/css2?family=Michroma&family=Montserrat:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        :root { --primary: #D32F2F; --dark: #f4f6f8; --light: #111111; --silver: #555555; --font-heading: 'Michroma', sans-serif; --font-body: 'Montserrat', sans-serif; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--dark); color: var(--light); font-family: var(--font-body); overflow-x: hidden; }
        
        body.dark-mode { --dark: #0f0f0f; --light: #f4f4f4; --silver: #C0C0C0; }
        body.dark-mode nav { background: #000; border-bottom: 1px solid #222; }
        body.dark-mode footer { background: #000; border-top: 1px solid #222; }
        body.dark-mode .car-card { background: #1a1a1a; border-color: #333; color: #f4f4f4; }
        body.dark-mode .car-info { background: #1a1a1a; }
        body.dark-mode .car-specs { border-top-color: #333; }

        nav { padding: 20px 50px; display: flex; justify-content: space-between; align-items: center; background: #fff; border-bottom: 1px solid #ddd; }
        .logo { font-family: var(--font-heading); font-size: 1.5rem; color: var(--light); text-decoration: none; }
        .nav-links a { color: var(--light); text-decoration: none; margin-left: 20px; text-transform: uppercase; font-size: 0.8rem; }

        section { padding: 100px 50px; }
        .section-title { font-family: var(--font-heading); font-size: 2.5rem; margin-bottom: 50px; text-align: center; text-transform: uppercase; }

        .inventory-wrapper { position: relative; }
        .inventory-slider { display: flex; overflow-x: auto; gap: 30px; padding: 20px 5px; scroll-behavior: smooth; scrollbar-width: none; }
        .inventory-slider::-webkit-scrollbar { display: none; }

        .slider-btn { position: absolute; top: 50%; transform: translateY(-50%); background: var(--primary); color: #fff; border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; opacity: 0.7; }
        .slider-btn:hover { opacity: 1; background: #b71c1c; transform: translateY(-50%) scale(1.1); }
        .prev-btn { left: -20px; }
        .next-btn { right: -20px; }

        .car-card { min-width: 320px; flex: 0 0 auto; background: #ffffff; border: 1px solid #e0e0e0; overflow: hidden; position: relative; transition: transform 0.3s ease; }
        .car-card:hover { transform: translateY(-10px); border-color: var(--primary); }
        .car-img { width: 100%; height: 250px; object-fit: cover; transition: transform 0.5s ease; }
        .car-card:hover .car-img { transform: scale(1.1); }
        .car-info { padding: 20px; position: relative; background: #ffffff; z-index: 2; }
        .car-specs { display: flex; justify-content: space-between; margin-top: 15px; color: var(--silver); font-size: 0.9rem; border-top: 1px solid #ddd; padding-top: 15px; transform: translateY(20px); opacity: 0; transition: all 0.3s ease; }
        .car-card:hover .car-specs { transform: translateY(0); opacity: 1; }
        .sold-badge { position: absolute; top: 15px; right: 15px; background: var(--primary); color: #fff; padding: 5px 12px; font-size: 0.8rem; font-weight: bold; border-radius: 4px; z-index: 5; }

        footer { background: #f9f9f9; padding: 50px; border-top: 1px solid #ddd; display: flex; justify-content: space-between; flex-wrap: wrap; gap: 30px; }
        .social-icons a { color: var(--light); margin-right: 15px; font-size: 1.2rem; transition: transform 0.3s; display: inline-block; }
        .social-icons a:hover { transform: translateY(-5px); color: var(--primary); }

        .filter-btn { margin: 0 10px; background: transparent; border: 1px solid var(--primary); color: var(--light); padding: 8px 20px; border-radius: 20px; cursor: pointer; transition: all 0.3s; font-family: var(--font-body); }
        .filter-btn.active, .filter-btn:hover { background: var(--primary); color: #fff; }
    </style>
</head>
<body>

    <nav>
        <a href="index.html" class="logo">HEM MOTORS</a>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="inventory.html">Inventory</a>
            <a href="new-arrivals.html">New Arrivals</a>
            <a href="about.html">About</a>
            <a href="contact.html">Contact</a>
            <a href="admin.html" style="color: var(--primary);">Admin</a>
            <i class="fas fa-sun" id="themeToggle" style="cursor: pointer; margin-left: 20px; color: var(--light);"></i>
        </div>
    </nav>

    <section id="inventory">
        <h2 class="section-title">Featured Inventory</h2>
        <div class="filter-container" style="text-align: center; margin-bottom: 30px;">
            <button class="filter-btn active" onclick="filterCars('all')">All</button>
            <button class="filter-btn" onclick="filterCars('New')">New</button>
            <button class="filter-btn" onclick="filterCars('Used')">Used</button>
        </div>
        <div class="inventory-wrapper">
            <button class="slider-btn prev-btn" onclick="scrollInventory(-1)"><i class="fas fa-chevron-left"></i></button>
            <div class="inventory-slider">
                <!-- Car cards will be dynamically inserted here by JavaScript -->
            </div>
            <button class="slider-btn next-btn" onclick="scrollInventory(1)"><i class="fas fa-chevron-right"></i></button>
        </div>
    </section>

    <footer>
        <div>
            <h3 class="logo">HEM MOTORS</h3>
            <p style="color: var(--silver); margin-top: 10px;">123 Luxury Lane, Beverly Hills, CA</p>
        </div>
        <div class="social-icons">
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
        <div>
            <p style="color: var(--silver); font-size: 0.8rem;">&copy; 2024 HEM MOTORS. All rights reserved.</p>
        </div>
    </footer>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // Theme Logic
        const toggleBtn = document.getElementById('themeToggle');
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
            toggleBtn.classList.replace('fa-sun', 'fa-moon');
        }
        toggleBtn.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            toggleBtn.classList.replace(isDark ? 'fa-sun' : 'fa-moon', isDark ? 'fa-moon' : 'fa-sun');
        });

        // Initialize LocalStorage if empty
        if (!localStorage.getItem('hemMotorsCars')) {
            const defaultCars = [
                { name: 'Phantom Black Edition', price: 'KES 18,000,000', year: 2024, mileage: '0 mi', condition: 'New', fuelType: 'Petrol', imageUrl: 'https://images.unsplash.com/photo-1617788138017-80ad40651399?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', description: 'Experience the pinnacle of luxury with the Phantom Black Edition.' },
                { name: 'GT Speedster', price: 'KES 25,500,000', year: 2023, mileage: '500 mi', condition: 'New', fuelType: 'Petrol', imageUrl: 'https://images.unsplash.com/photo-1605559424843-9e4c228bf1c2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', description: 'Built for speed and elegance.' },
                { name: 'Vantage Coupe', price: 'KES 21,000,000', year: 2024, mileage: '100 mi', condition: 'New', fuelType: 'Petrol', imageUrl: 'https://images.unsplash.com/photo-1552519507-da3b142c6e3d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', description: 'A timeless classic re-engineered for the future.' },
                { name: 'Azure Convertible', price: 'KES 29,000,000', year: 2024, mileage: '50 mi', condition: 'New', fuelType: 'Petrol', imageUrl: 'https://images.unsplash.com/photo-1583121274602-3e2820c69888?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', description: 'Feel the wind in complete silence.' },
                { name: 'Mercedes-Benz C-Class', price: 'KES 4,500,000', year: 2018, mileage: '45,000 mi', condition: 'Used', fuelType: 'Diesel', imageUrl: 'https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', description: 'Reliable luxury sedan, well maintained.' },
                { name: 'Toyota Land Cruiser Prado', price: 'KES 6,800,000', year: 2019, mileage: '30,000 mi', condition: 'Used', fuelType: 'Diesel', imageUrl: 'https://images.unsplash.com/photo-1594502184342-28ef379c3c53?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', description: 'Off-road capability with premium comfort.' },
                { name: 'BMW X5 xDrive', price: 'KES 5,200,000', year: 2017, mileage: '55,000 mi', condition: 'Used', fuelType: 'Diesel', imageUrl: 'https://images.unsplash.com/photo-1556189250-72ba9545225a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', description: 'Spacious SUV with dynamic driving performance.' },
                { name: 'Subaru Outback', price: 'KES 3,500,000', year: 2020, mileage: '25,000 mi', condition: 'Used', fuelType: 'Petrol', imageUrl: 'https://images.unsplash.com/photo-1626218174358-7769486c4b79?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', description: 'Versatile crossover perfect for family adventures.' }
            ];
            localStorage.setItem('hemMotorsCars', JSON.stringify(defaultCars));
        }

        const cars = JSON.parse(localStorage.getItem('hemMotorsCars'));
        let currentFilter = 'all';

        function filterCars(type) {
            currentFilter = type;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.textContent === (type === 'all' ? 'All' : type)) btn.classList.add('active');
            });
            renderAndAnimateCars();
        }

        function renderAndAnimateCars() {
            const inventorySlider = document.querySelector('.inventory-slider');
            if (!inventorySlider) return;

            const filteredCars = currentFilter === 'all' 
                ? cars 
                : cars.filter(car => car.condition === currentFilter);

            if (filteredCars.length === 0) {
                inventorySlider.innerHTML = '<p style="text-align:center; width:100%; padding: 20px;">No vehicles found in this category.</p>';
                return;
            }

            inventorySlider.innerHTML = filteredCars.map((car) => {
                // Find original index in the main 'cars' array to ensure links work correctly
                const originalIndex = cars.indexOf(car);
                return `
                <div class="car-card" onclick="window.location.href='details.html?id=${originalIndex}'" style="cursor: pointer;">
                    ${car.sold ? '<div class="sold-badge">SOLD</div>' : ''}
                    <img src="${car.imageUrl}" alt="${car.name}" class="car-img">
                    <div class="car-info">
                        <h3>${car.name}</h3>
                        <div class="car-specs">
                            <span>${car.price}</span>
                            <span>${car.year}</span>
                            <span>${car.mileage}</span>
                        </div>
                    </div>
                </div>
            `}).join('');

            gsap.set(".car-card", { x: 100, opacity: 0 });
            ScrollTrigger.batch(".car-card", {
                onEnter: batch => gsap.to(batch, { x: 0, opacity: 1, stagger: 0.15, duration: 0.8, ease: "power2.out", overwrite: true }),
                start: "top 85%",
                once: true
            });
            ScrollTrigger.refresh();

            let autoScrollInterval = setInterval(() => scrollInventory(1, true), 4000);
            inventorySlider.addEventListener('mouseenter', () => clearInterval(autoScrollInterval));
            inventorySlider.addEventListener('mouseleave', () => {
                autoScrollInterval = setInterval(() => scrollInventory(1, true), 4000);
            });
        }
        renderAndAnimateCars();

        window.scrollInventory = function(direction, isAuto = false) {
            const slider = document.querySelector('.inventory-slider');
            const cardWidth = 350; 
            if (isAuto && (slider.scrollLeft + slider.clientWidth >= slider.scrollWidth - 10)) {
                slider.scrollTo({ left: 0, behavior: 'smooth' });
            } else {
                slider.scrollBy({ left: direction * cardWidth, behavior: 'smooth' });
            }
        };
    </script>
</body>
</html>